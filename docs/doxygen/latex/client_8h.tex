\hypertarget{client_8h}{}\section{Riferimenti per il file /mnt/c/\+Users/stefa/\+Desktop/new/system\+\_\+call/src/client.h}
\label{client_8h}\index{/mnt/c/\+Users/stefa/\+Desktop/new/system\+\_\+call/src/client.\+h@{/mnt/c/\+Users/stefa/\+Desktop/new/system\+\_\+call/src/client.\+h}}


Contiene la definizioni di variabili e funzioni specifiche del C\+L\+I\+E\+NT.  


\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{client_8h_a48d605ff689f470746c858648f0a98c2}{S\+I\+G\+I\+N\+T\+Signal\+Handler} (int sig)
\begin{DoxyCompactList}\small\item\em Handler del segnale S\+I\+G\+I\+NT. \end{DoxyCompactList}\item 
void \hyperlink{client_8h_a50b22adcb76198fcd9402a97ff4711bf}{S\+I\+G\+U\+S\+R1\+Signal\+Handler} (int sig)
\begin{DoxyCompactList}\small\item\em Handler del segnale S\+I\+G\+U\+S\+R1. \end{DoxyCompactList}\item 
void \hyperlink{client_8h_a55586f2b7e9b3620294cf78cda8abdad}{dividi} (int fd, char $\ast$buf, size\+\_\+t count, char $\ast$file\+Path, int parte)
\begin{DoxyCompactList}\small\item\em Divide in 4 parti il contenuto del file da inviare al server. \end{DoxyCompactList}\item 
void \hyperlink{client_8h_a54b47b58f228d7bc9827d2919687e25a}{operazioni\+\_\+figlio} (char $\ast$file\+Path)
\begin{DoxyCompactList}\small\item\em Funzione eseguita da ogni Client i (figli di Client 0) per mandare i file al server. \end{DoxyCompactList}\item 
int \hyperlink{client_8h_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Descrizione dettagliata}
Contiene la definizioni di variabili e funzioni specifiche del C\+L\+I\+E\+NT. 



\subsection{Documentazione delle funzioni}
\mbox{\Hypertarget{client_8h_a55586f2b7e9b3620294cf78cda8abdad}\label{client_8h_a55586f2b7e9b3620294cf78cda8abdad}} 
\index{client.\+h@{client.\+h}!dividi@{dividi}}
\index{dividi@{dividi}!client.\+h@{client.\+h}}
\subsubsection{\texorpdfstring{dividi()}{dividi()}}
{\footnotesize\ttfamily void dividi (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{char $\ast$}]{buf,  }\item[{size\+\_\+t}]{count,  }\item[{char $\ast$}]{file\+Path,  }\item[{int}]{parte }\end{DoxyParamCaption})}



Divide in 4 parti il contenuto del file da inviare al server. 


\begin{DoxyParams}{Parametri}
{\em fd} & File descriptor del file da inviare \\
\hline
{\em buf} & Buffer in cui memorizzare la porzione del messaggio \\
\hline
{\em count} & Dimensione della porzione di messaggio \\
\hline
{\em file\+Path} & Percorso del file da suddividere \\
\hline
{\em parte} & Numero identificativo della porzione di messaggio \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{client_8h_a0ddf1224851353fc92bfbff6f499fa97}\label{client_8h_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{client.\+h@{client.\+h}!main@{main}}
\index{main@{main}!client.\+h@{client.\+h}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

Memorizza il percorso passato come parametro, gestisce segnali e handler, attende i segnali S\+I\+G\+I\+NT o S\+I\+G\+U\+S\+R1.


\begin{DoxyParams}{Parametri}
{\em argc} & Numero argomenti passati da linea di comando (compreso il nome dell\textquotesingle{}eseguibile) \\
\hline
{\em argv} & Array di argomenti passati da linea di comando \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Restituisce}
int Exit code dell\textquotesingle{}intero programma
\end{DoxyReturn}
A\+N\+N\+O\+T\+A\+Z\+I\+O\+NE\+: Probabilmente bisogna fare un ciclo per aspettare ogni file. Per ogni file bisogna attendere le 4 parti e poi scriverle su file in ordine.

terminazione effettuata con S\+I\+G\+I\+NT\+: Al termine chiudi tutte le I\+PC.

\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000007}{Da fare}]La ricezione dei messaggi dai vari canali dovra\textquotesingle{} essere asincrona. \end{DoxyRefDesc}
\mbox{\Hypertarget{client_8h_a54b47b58f228d7bc9827d2919687e25a}\label{client_8h_a54b47b58f228d7bc9827d2919687e25a}} 
\index{client.\+h@{client.\+h}!operazioni\+\_\+figlio@{operazioni\+\_\+figlio}}
\index{operazioni\+\_\+figlio@{operazioni\+\_\+figlio}!client.\+h@{client.\+h}}
\subsubsection{\texorpdfstring{operazioni\+\_\+figlio()}{operazioni\_figlio()}}
{\footnotesize\ttfamily void operazioni\+\_\+figlio (\begin{DoxyParamCaption}\item[{char $\ast$}]{file\+Path }\end{DoxyParamCaption})}



Funzione eseguita da ogni Client i (figli di Client 0) per mandare i file al server. 

\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000005}{Da fare}]Aggiungere la sincronizzazione con gli altri client\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000006}{Da fare}]Aggiungere la parte di comunicazione delle quattro parti dei messaggi\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Warnings}
\item[\hyperlink{warning__warning000007}{Warnings}]siccome l\textquotesingle{}ultima parte del messaggio e\textquotesingle{} l\textquotesingle{}unica che puo\textquotesingle{} essere piu\textquotesingle{} corta per specifica... Cosa bisogna fare in casi in cui non e\textquotesingle{} possibile garantire questo vincolo? Esempio\+: 2 caratteri possono essere divisi in\+:
\begin{DoxyItemize}
\item caratteri per parte\+: 1 1 0 0
\item oppure\+: 2 0 0 0 ~\newline
 Lo stesso problema si pone per 1, 2, 5, 6, 9, 10, ... caratteri. ~\newline
 Non posso garantire come ad esempio nel caso di 3 caratteri che sono l\textquotesingle{}ultimo numero sia inferiore\+: Esempio di suddivisione di 3 caratteri\+: 1 1 1 0. L\textquotesingle{}ultimo, come per specifica, e\textquotesingle{} l\textquotesingle{}unico di dimensione inferiore
\end{DoxyItemize}\end{DoxyRefDesc}



\begin{DoxyParams}{Parametri}
{\em file\+Path} & Percorso del file che il client deve suddividere e mandare al server. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{client_8h_a48d605ff689f470746c858648f0a98c2}\label{client_8h_a48d605ff689f470746c858648f0a98c2}} 
\index{client.\+h@{client.\+h}!S\+I\+G\+I\+N\+T\+Signal\+Handler@{S\+I\+G\+I\+N\+T\+Signal\+Handler}}
\index{S\+I\+G\+I\+N\+T\+Signal\+Handler@{S\+I\+G\+I\+N\+T\+Signal\+Handler}!client.\+h@{client.\+h}}
\subsubsection{\texorpdfstring{S\+I\+G\+I\+N\+T\+Signal\+Handler()}{SIGINTSignalHandler()}}
{\footnotesize\ttfamily void S\+I\+G\+I\+N\+T\+Signal\+Handler (\begin{DoxyParamCaption}\item[{int}]{sig }\end{DoxyParamCaption})}



Handler del segnale S\+I\+G\+I\+NT. 

\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000002}{Da fare}]Gestire la parte di comunicazione con il server.\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000003}{Da fare}]Potrebbe essere necessario ottimizzare l\textquotesingle{}uso dello H\+E\+AP nel client 0. Attualmente la dimensione massima occupata dal client e\textquotesingle{}\+: \$\$100 file $\ast$ dim. path + 100 file $\ast$ dim. pointer\$\$. Assumento dim. path massima = 250 caratteri e dim. pointer 4 byte (32 bit)\+: \$\$100 $\ast$ 250 + 100 $\ast$ 4 = 25400\$\$ Quindi solo lato client si occupano 25 K\+Byte. Altro problema\+: ogni client i eredita la lista creando al massimo altre 100 liste concatenate? In quel caso si occuperebbero\+: \$\$25 + 100 $\ast$ 25 = 2525\$\$ Ovvero 2525 KB, circa 2.\+5 MB.\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Warnings}
\item[\hyperlink{warning__warning000004}{Warnings}]Per ottimizzare l\textquotesingle{}uso dello H\+E\+AP nel client 0 si potrebbe prima cercare e contare quanti file sono presenti senza creare una lista concatenata e poi ricercare i file e man mano che si trovano file send\+\_\+me si puo\textquotesingle{} creare il processo figlio per inviare il file. Per fare questo B\+I\+S\+O\+G\+NA sapere se il numero di file puo\textquotesingle{} cambiare durante l\textquotesingle{}esecuzione del programma\+: se trovo 3 file e dopo un file viene cancellato cosa succede? ~\newline
 N\+O\+TA\+: questo problema puo\textquotesingle{} esserci anche nella situazione attuale...\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Warnings}
\item[\hyperlink{warning__warning000005}{Warnings}]Il client 0 deve attendere i processi figlio? La specifica indica solo che bisogna attendere il messaggio di fine dal server... Probabilmente prima bisogna attendere il messaggio di fine e poi aspettare che tutti i figlio terminino (prima di liberare la lista dei file e).\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Warnings}
\item[\hyperlink{warning__warning000006}{Warnings}]Il percorso passato al client deve essere assoluto o puo\textquotesingle{} essere relativo? Se si passa un percorso relativo chdir() fallira\textquotesingle{} alla seconda esecuzione. ~\newline
 S\+O\+L\+U\+Z\+I\+O\+NE\+: si potrebbe usare un altro chdir() a fine funzione per tornare al percorso di esecuzione iniziale anticipando il chdir() successivo.\end{DoxyRefDesc}


Esegue tutte le funzionalita\textquotesingle{} principali del client.


\begin{DoxyParams}{Parametri}
{\em sig} & Valore intero corrispondente a S\+I\+G\+I\+NT\\
\hline
\end{DoxyParams}
Handler del segnale S\+I\+G\+I\+NT.


\begin{DoxyParams}{Parametri}
{\em sig} & \\
\hline
\end{DoxyParams}
Questo Ã¨ il grafo delle chiamate per questa funzione\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{client_8h_a48d605ff689f470746c858648f0a98c2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{client_8h_a50b22adcb76198fcd9402a97ff4711bf}\label{client_8h_a50b22adcb76198fcd9402a97ff4711bf}} 
\index{client.\+h@{client.\+h}!S\+I\+G\+U\+S\+R1\+Signal\+Handler@{S\+I\+G\+U\+S\+R1\+Signal\+Handler}}
\index{S\+I\+G\+U\+S\+R1\+Signal\+Handler@{S\+I\+G\+U\+S\+R1\+Signal\+Handler}!client.\+h@{client.\+h}}
\subsubsection{\texorpdfstring{S\+I\+G\+U\+S\+R1\+Signal\+Handler()}{SIGUSR1SignalHandler()}}
{\footnotesize\ttfamily void S\+I\+G\+U\+S\+R1\+Signal\+Handler (\begin{DoxyParamCaption}\item[{int}]{sig }\end{DoxyParamCaption})}



Handler del segnale S\+I\+G\+U\+S\+R1. 

\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000004}{Da fare}]Gestire la chiusura delle risorse. Potrebbe non essere necessario\+: dipende dalla implementazione delle altre funzioni.\end{DoxyRefDesc}


Termina il processo del client 0.


\begin{DoxyParams}{Parametri}
{\em sig} & Valore intero corrispondente a S\+I\+G\+U\+S\+R1 \\
\hline
\end{DoxyParams}
